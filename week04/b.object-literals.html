<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Object Literals</title>
</head>

<body>
    <script>
        /*
         Object as an instance of class:
         *******************************
         - Properties or Attributes => variables declared inside class
         - Methods => functions inside a class
         
             OOP => A PIE  
         
         Object Literals:
         ****************
         - a way to define an object using a simple and concise syntax
         - a list of zero or more pairs of property names
         - each property is associated with its value
         
         - Using key-value pairs separated by commas:
            > "key" is a string (or identifier), 
            > "value" can be any valid JavaScript data type
                
         - Basically => Key-Value Pairs: 
            > Each key is followed by a colon : 
            > and its corresponding value
         - the "property: value" paris of an object are enclosed in curly braces { }
         - object properties are written inside curly braces { } separated by commas
 
         Any object (class) in any OOP can have two members:
             > Properties: variables inside object
             > Methods: functions inside object
         */

        /* 
        In JavaScript, we can create an object without a class

        In Java, we create a class (as blueprint) then its object(s):

        Class Student {
        }

        Student student1 = new Student();
        Student student2 = new Student();
        Student student3 = new Student();

        Object Literal => object without a class!

        Please consider the following symbols:
        - { } => are used to define an object
        - [ ] => for arrays => arrays of object
        */

        // Look at the two basic objects below (Simple Properties):
        const bio = {
            name: "Alex Chow",
            dob: "1974-07-12",
            occupation: "Software Developer"
        };

        const contact = {
            phone: "416-123-1234",
            email: "alexchow@InLoveWithJavaScript.com",
            address: "123 Yonge St. Toronto-Ontario Q1W2E3"
        };

        // Creating an object in JS (Simple Properties and Methods):
        const car = {
            // Object Properties:
            brand: 'Toyota',
            year: 2020,
            model: 'SXT',

            // Object Methods: Function inside an object/class are called "Method"
            drive: function () {
                console.log("Drive Froward!");
            }
        } // car

        // Other Example
        const student = {
            fullName: 'Alex Chow',
            program: 'CMPG',

            // function inside an object is called a method:
            // In JS (ES5) define a method:
            read: function () {
                console.log("Reading JS framework");
            },

            // In (ES6) define a method:
            write() {
                console.log("Writing the assignment");
            }
        } // student

        /*
        in ES5 (Before ES6): using the normal way of DOT notation to access the object's members:
        */
        student.read();
        student.fullName = "Martin Smith";

        /*
        Since ES6: we can also use the bracket notation with properties:
        */
        student['fullName'] = "Sam Simpson";


        /*
        Tip:
        bracket notation can be used if we don't know the property that we need to access:
        the property name could a value that we receive from an input form:
        */
        const property = 'fullName';
        student[property] = 'Kate Wilson';
        console.log(student);

        // More Advanced Example (using the keyword "this"):
        let person = {
            // Keys => properties (fields)
            firstName: "Alex",
            lastName: "Chow",
            age: 48,
            jobTitle: "Instructor",
            courses: ["Java", "JavaScript", "PHP", "Python"],
            // method
            getInfo: function () {
                document.write("<h2>Full Info</h2>");
                /*
                To access any object property => object.propertyName

                Yes, we can use for example: person.firstName (Not recommended)
                
                To access any object member (properties/methods) within this object itself
                we need to use a JS keyword "this" (it's better than using the object name itself)
                so the keyword "this" is used when we want to refer to information within the object
                */
                // document.write("Full Name: " + firstName+ " " + lastName);
                /* 
                To recap: 
                ReferenceError: firstName is not defined
                same error for lastName and age
            
                We cannot access the object properties without the keyword "this"
                The correct answer:
                */
                document.write("Full Name: " + this.firstName);


                // Or using "Template Literal":
                document.write(`${this.firstName} ${this.lastName} is ${this.age} years old`);
                // return true;
                // return 100;
            }
        } // person


        document.write(`<br>Full Name: ${person.firstName} ${person.lastName}`);
        document.write("<br>Full Name: " + person.firstName + " " + person.lastName);
        document.write("<br>The second course is: " + person.courses[1]);

        person.getInfo();

        /* 
        - Simple JS Object Literal
        - JSON => JavaScript Object Notation !!!
        */


        // Another Example:
        let country = {
            name: "Canada",  // string value
            capital: "Ottawa", // numeric value
            sea: true, // boolean value
            population: 38131104,
            language: "English",
            provinces: ["ON", "QC", "NS", "NB", "MB", "BC", "PE", "SK", "AB", "NL"],
            territories: ["NT", "YT", "NU"],
            // To know more about our country Canada: https://en.wikipedia.org/wiki/Provinces_and_territories_of_Canada
            //adding a method for this object named "bio":
            bio: function () {
                console.log(this.name + " is a country with " + this.population + " people");
                console.log("We are studying in Toronto Campus, Toronto is part of " + this.provinces[0]);
            }
        } // country

        let employee = {
            // properties (fields)
            firstName: "Alex",
            lastName: "White",
            age: 50,
            jobTitle: "Teacher",
            courses: ["ASP.NET", "Python", "PHP"],
            address: {
                street: "123 Yonge Street",
                city: "Toronto",
                province: "ON",
                code: "Q2W 3W4"
            },
            // method
            getInfo: function () {
                document.write("<h2>Employee Info</h2>");
                document.write("<ul>");
                document.write(`<li>Full Name: ${this.firstName} ${this.lastName}</li>`);
                document.write(`<li>Job Title: ${this.jobTitle}</li>`);
                document.write("</ul>");
            }
        }

        employee.getInfo();
        // Task: Alex White lives in Toronto
        document.write(`<br>${employee.firstName} ${employee.lastName} lives in ${employee.address.city}`);

        /* 
        Another way to create an object in JS is by using new Constructor():
        */
        const book = new Object({
            title: "Core JAVA Twelfth Edition",
            author: "Cay Horstman",
            publisher: "Oracle",
            released: 2022,
            getBookInfo: function () {
                console.log(`Textbook: ${this.title} by ${this.author}, was released in ${this.released}`);
            }
        });

        // Creating an array of objects:
        let courses = [
            {
                section: 205,
                name: "Java Advanced",
                semester: 3,
                day: "Wed",
                isOnline: false
            },
            {
                section: 206,
                name: "JavaScript",
                semester: 3,
                day: "Fri",
                isOnline: true
            },
            {
                section: 203,
                name: "ASP.NET",
                semester: 3,
                day: "Wed",
                isOnline: false
            },
            {
                section: 202,
                name: "PHP",
                semester: 2,
                day: "Mon",
                isOnline: true
            },
        ];


        /*
   The keyword "this" in C#/Java
   always returns a reference to this class object 
   which is a reference to the current object

   But this is not always the case in JS
   */
        const student = {
            fullName: 'Alex Chow',
            program: 'CMPG',

            write() {
                console.log(this);
            }
        }

        student.write();
        /*
        Object
            fullName: "Alex Chow"
            program: "CMPG"
            write : 
            Æ’ write()
        */

        // check "write1" and "write2"
        /*
        This line will also print the object "student" as are calling the write() method;
        */
        const write1 = student.write();

        console.log("WRITE1:");
        console.log(write1); // undefined;
        /*
        so console.log the keyword "this" => undefined
        */

        /*
        This line will NOT call the write() method,
        will just get a reference to the method "write" of the object student
        */
        const write2 = student.write;

        // Test:
        console.log("WRITE2:");
        console.log(write2);
        /*
        Output (copied from console window):
        Æ’ write() {
                console.log(this);
        }
        
        so our constant "write2" was set to the method (object's function): write()
        */


        /*
        Now let's try to call the write2() as a function:
        */
        write2();
        /*
        Output:
        Window {window: Window, self: Window, document: document, name: '', location: Location, â€¦}
        
        In such case the value of "this" keyword refer to the "Window" object
        */

        /*
        As a conclusion:
        The value of this is determined by the way we call our function:
         
        way#1: 
        > calling the function as a method for an object 
        => returns a reference to the object itself
         
        way#2:
        > calling the function as a standalone object (not attached to an object) 
        => returns the global object which is the "Window" object of the browser
        NOTE: if the strict mode is NOT enabled, otherwise returns "undefined"
        */

        /*
        In JavaScript, function can act as object
        Sp to make the keyword "this" always returns a reference to the object itself,
        we can use another method "bind":
         
        VScode: 
        > For a given function, creates a bound function that has the same body as the original function.
        > (method) Function.bind(this: Function, thisArg: any, ...argArray: any[]): any
        so whatever we pass to bind() will determine the value of "this" keyword:
        bind() method will return a new instance that points to "student" object
        */
        const write3 = student.write.bind(student);

        console.log("WRITE3:");
        console.log(write3);

        write3();
        /*
        output: {fullName: 'Alex Chow', program: 'CMPG', write: Æ’}
        */

        /*
        so functions in JS can be treated as objects that can have properties and methods
        */


        // ******************************
        // Loops with arrays and objects:
        // ******************************
        // looping through an array:
        // loop to print the object/arrays:
        for (let index = 0; index < courses.length; index++) {
            const element = courses[index];
            // element => object => key: value
            document.write(element); // [object Object]
            console.log(element);
        }

        for (let index = 0; index < courses.length; index++) {
            const element = courses[index];
            document.write("<br><br>Section: " + element.section);
            document.write("<br>Subject: " + element.name);
            document.write("<br>" + element.semester);
            document.write("<br>" + element.day);
            // Ternary Operator:
            let mode = (element.isOnline) ? "Online" : "In-person"
            document.write("<br>Delivery Mode: " + mode);
        }


        document.write("<hr>");

        for (const element of courses) {
            document.write("<br><br>Section: " + element.section);
            document.write("<br>Subject: " + element.name);
            document.write("<br>" + element.semester);
            document.write("<br>" + element.day);
            // Ternary Operator:
            let mode = (element.isOnline) ? "Online" : "In-person"
            document.write("<br>Delivery Mode: " + mode);
        }

        /* 
        Remember this structure:
        element => {
            
        }

        It is a function!
        - no name => anonymous function
        - no keyword function => arrow function using arrow function
        */

        console.log("More Advanced Functions:");

        document.write("<ul>");
        for (const key in bio) {
            document.write(`<li>${key}: ${bio[key]}</li>`);
            document.write("<li>" + key + "</li>");
        }
        document.write("</ul>");

        for (const key in courses) {
            const element = courses[key];
            document.write("<br><br>Section: " + element.section);
            document.write("<br>Subject: " + element.name);
            document.write("<br>" + element.semester);
            document.write("<br>" + element.day);
            // Ternary Operator:
            let mode = (element.isOnline) ? "Online" : "In-person"
            document.write("<br>Delivery Mode: " + mode);
        }
    </script>
</body>

</html>